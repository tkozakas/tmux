unbind-key C-b
set-option -g prefix C-a
bind-key C-a send-prefix
set -g set-clipboard on
set -g mouse on
set -g allow-passthrough on

# Performance optimizations
set -sg escape-time 0                    # Remove ESC delay (critical for vim)
set -g focus-events on                   # Pass focus events to applications
set -g aggressive-resize on              # Resize windows aggressively
set -g history-limit 5000                # Scrollback buffer
set -g status-interval 5                 # Update status every 5s (not default 1s)

set-window-option -g pane-base-index 1

set-option -g base-index 1
set-option -g renumber-windows on

# Pane management
bind-key r split-window -h -c "#{pane_current_path}"
bind-key d split-window -v -c "#{pane_current_path}"
bind-key q kill-pane

# Pane navigation (vim-style)
bind-key -r h select-pane -L
bind-key -r j select-pane -D
bind-key -r l select-pane -R
bind-key -r k select-pane -U

# Pane resizing
bind-key -r H resize-pane -L 500
bind-key -r J resize-pane -D 500
bind-key -r K resize-pane -U 500
bind-key -r L resize-pane -R 500

# Fine-grained pane resizing
bind-key -r C-h resize-pane -L 5
bind-key -r C-j resize-pane -D 5
bind-key -r C-k resize-pane -U 5
bind-key -r C-l resize-pane -R 5

# Pane swapping
bind-key > swap-pane -D
bind-key < swap-pane -U

# Window management
bind-key c new-window -c "#{pane_current_path}"  # New window in current path
bind-key w choose-window                          # Interactive window selection
bind-key X confirm-before -p "Kill window? (y/n)" kill-window

# Session management
bind-key N new-session                            # Create new session
bind-key S choose-session                         # Switch sessions

# Reload config
bind-key -r % source ~/.tmux.conf \; display-message "Config reloaded!"

set-option -g status-position top
set -g status-justify left
set -g status-left ""
set -g status-right "#{?pane_in_mode}"

set -g status-bg "#282c33"
set -g window-status-current-format "#[fg=white bg=default] â¯ #W "
set -g window-status-format "#[fg=white bg=default] #I #W "

# Project/file navigation
bind-key n run-shell "~/.tmux/scripts/project-switcher.sh"            # Window switcher
bind-key C-f run-shell "~/.tmux/scripts/tmux-sessionizer.sh"          # Session switcher
bind-key g display-popup -E -w 80% -h 80% "~/.tmux/scripts/git-branch-switcher.sh"  # Git branch switcher

# OpenCode integration - toggles opencode in right pane (30% width)
bind-key o run-shell "~/.tmux/scripts/opencode-launcher.sh"

# Quick layout switching
bind-key M-1 select-layout even-horizontal
bind-key M-2 select-layout even-vertical
bind-key M-3 select-layout main-horizontal
bind-key M-4 select-layout main-vertical
bind-key M-5 select-layout tiled

# Pane synchronization toggle (type in all panes at once)
bind-key s set-window-option synchronize-panes\; display-message "Panes sync: #{?synchronize-panes,ON,OFF}"
